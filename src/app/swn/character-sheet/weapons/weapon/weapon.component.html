<div>
  <div class="input-group">
    <input [readonly]="!editMode" type="text" [ngClass]="editMode?'form-control col-9':'form-control'" [attr.name]="item.name"
      [(ngModel)]="item.name" placeholder="Name" [ngbTypeahead]="search" (selectItem)="onSelectItem($event)">

    <span *ngIf="!editMode" class="input-group-addon">{{item.damage}}</span>
    <input *ngIf="editMode" type="text" class="form-control col-3" [attr.name]="item.name" [(ngModel)]="item.damage" placeholder="Damage">

    <span *ngIf="!editMode" class="input-group-btn">
      <button type="button" class="btn btn-dark dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <a *ngIf="item.readied">readied</a>
        <a *ngIf="item.stowed">stowed</a>
        <a *ngIf="!item.readied && !item.stowed">stored</a>
      </button>
      <div class="dropdown-menu dropdown-menu-right">
        <a class="dropdown-item" (click)="item.readied = true; item.stowed = false;" href="#">ready</a>
        <a class="dropdown-item" (click)="item.readied = false; item.stowed = true;" href="#">stow</a>
        <a class="dropdown-item" (click)="item.readied = false; item.stowed = false;" href="#">store</a>
      </div>
    </span>

    <span class="input-group-btn">
      <button class="btn btn-dark" type="button" data-toggle="collapse" [attr.data-target]="'#' + _guid">
        detail
      </button>
    </span>
  </div>

  <div class="container-fluid collapse" [attr.id]="_guid">

    <div class="row">
      <div class="col-4  input-group">
        <span class="input-group-addon" id="basic-addon1">TL</span>
        <input [readonly]="!editMode" type="number" class="form-control" id="tl" name="tl" [(ngModel)]="item.tl">
      </div>

      <div class="col-4 input-group">
        <span class="input-group-addon" id="basic-addon1">type</span>
        <input [readonly]="!editMode" type="text" class="form-control" id="type" name="type" [(ngModel)]="item.type">
      </div>

      <div class="col-4 input-group">
        <span class="input-group-addon" id="basic-addon1">enc</span>
        <input [readonly]="!editMode" type="number" class="form-control" id="encumbrance" name="encumbrance" [(ngModel)]="item.encumbrance">
      </div>
    </div>

    <div class="row">
      <div class="col-6 input-group">
        <span class="input-group-addon" id="basic-addon1">attribute</span>
        <input [readonly]="!editMode" type="text" class="form-control" id="attribute" name="attribute" [(ngModel)]="item.attribute">
      </div>

      <div class="col-4 input-group">
        <span class="input-group-addon" id="basic-addon1">range</span>
        <input [readonly]="!editMode" type="number" class="form-control" id="effectiv" name="effectiv" [(ngModel)]="item.range.effectiv">
      </div>
      <input [readonly]="!editMode" type="number" class="col-2 form-control" id="max" name="max" [(ngModel)]="item.range.max">
    </div>

    <div class="row" style="padding-bottom: 5px">
      <textarea [readonly]="!editMode" class="col" rows="3" id="details" name="details" [(ngModel)]="item.details"></textarea>
    </div>
  </div>
</div>
